#!/bin/bash
###############
# some config
xrmode=$1;
echo $xrmode;
xrmain="LVDS1"
xrmain_res="1366x768"
xr2nd="VGA1"
xr2nd_digi="DP1"

function bg_set() {
    if [ -f "${HOME}/.fehbg" ]; then
        $( cat ${HOME}/.fehbg | sed "s,',,g" );
    fi
}

###############
# notebook
xrandr --output $xrmain --mode $xrmain_res


###############
# single-display
if [[ "x${xrmode}" = "x--single" ]]; then
    echo "Switching to single-display mode..."
    RET=`xrandr --output $xr2nd --off`
    bg_set
    exit $RET;
fi

# wtf?
#xrandr --output VGA1 --mode 2048x1152 --right-of LVDS1

###############
# small one
xr2nd_res='1680x1050'
if [[ "x${xrmode}" = "x--small" ]]; then
    echo "Second screen: $xr2nd_res (right)"
    xrandr --output $xr2nd --mode $xr2nd_res --right-of $xrmain --rotate normal
    bg_set
    exit $?;
fi
if [[ "x${xrmode}" = "x--small2" ]]; then
    echo "Second screen: $xr2nd_res (above)"
    xrandr --output $xr2nd --mode $xr2nd_res --above $xrmain --rotate normal
    bg_set
    exit $?;
fi

###############
# beamer
xr2nd_res='1024x768'
if [[ "x${xrmode}" = "x--beamer" ]]; then
    echo "Second screen: $xr2nd_res (mirror)"
    xrandr --output $xr2nd --mode $xr2nd_res --same-as $xrmain --rotate normal
    bg_set
    exit $?;
fi

xr2nd_res='1024x768'
if [[ "x${xrmode}" = "x--left" ]]; then
    echo "Second screen: $xr2nd_res (left)"
    xrandr --output $xr2nd --mode $xr2nd_res --left-of $xrmain --rotate normal
    bg_set
    exit $?;
fi

###############
# big samsung
xr2nd_res='1920x1080'
xr3rd_res='1024x768'
if [[ "x${xrmode}" = "x--double" ]]; then
    echo "Second screen: $xr2nd_res (right)"
    xrandr --output $xr2nd --mode $xr2nd_res --right-of $xrmain --rotate normal
    bg_set
    exit $?;
fi

if [[ "x${xrmode}" = "x--ddouble" ]]; then
    echo "Second screen: $xr2nd_res (right)"
    echo xrandr --output $xr2ndd --mode $xr2nd_res --right-of $xrmain --rotate normal
    xrandr --output $xr2ndd --mode $xr2nd_res --right-of $xrmain --rotate normal
    bg_set
    exit $?;
fi

if [[ "x${xrmode}" = "x--triple" ]]; then
    echo "Second screen: $xr2nd_res (right)"
    echo xrandr --output $xr2nd_digi --mode $xr2nd_res --right-of $xrmain --rotate normal
    xrandr --output $xr2nd_digi --mode $xr2nd_res --right-of $xrmain --rotate normal
    xrandr --output $xr2nd --mode $xr3rd_res --right-of $xr2nd_digi --rotate normal
    bg_set
    exit $?;
fi

# digital borked
#xrandr --output DP1 --mode 1920x1080 --right-of LVDS1 --rotate normal

ac tr
